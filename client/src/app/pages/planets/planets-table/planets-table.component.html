@defer {
  <div class="flex w-full justify-start items-center animate-fade-in">
    <div class="overflow-x-auto border rounded-lg shadow-sm w-full">
      <table class="min-w-full divide-y divide-gray-200 table-fixed">
        <thead class="bg-gray-50">
          <tr>
            <th class="py-3 px-6 text-left text-gray-500 font-medium text-sm w-[375px]">Name</th>
            <th class="py-3 px-6 text-left text-gray-500 font-medium text-sm w-[80px]">Color</th>
            <th
              class="py-3 px-6 text-left text-gray-500 font-medium text-sm w-[80px] cursor-pointer select-none"
              (click)="toggleSort()"
            >
              Radius in km
              @if (sortDirection === 'asc') {
                <span>▲</span>
              }
              @if (sortDirection === 'desc') {
                <span>▼</span>
              }
            </th>
            <th class="py-3 px-6 text-left text-gray-500 font-medium text-sm w-[80px]">Dist. from Sun</th>
            <th class="py-3 px-6 text-left text-gray-500 font-medium text-sm w-[80px]">Dist. from Earth</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200 w-full">
          @for (
            planet of planetStore.filteredPlanets().length > 0 ? planetStore.filteredPlanets() : planetStore.planets();
            track planet
          ) {
            <tr
              class="cursor-pointer hover:bg-purple/30 transition duration-300 ease-in-out"
              [routerLink]="['/planet', planet?.id]"
            >
              <td class="py-3 px-5 w-[375px] min-w-[375px] max-w-[375px]">
                <div class="flex items-center gap-3">
                  @if (planet?.imageUrl) {
                    <img [src]="planet?.imageUrl" class="w-8 h-8 rounded-full object-cover flex-shrink-0" />
                  } @else {
                    <div class="w-8 h-8 rounded-full bg-purple"></div>
                  }

                  <div class="truncate">
                    <div class="font-semibold text-gray-800 truncate">{{ planet?.planetName }}</div>
                    <p class="text-gray-400 text-sm truncate overflow-hidden whitespace-nowrap">
                      {{ planet?.description }}
                    </p>
                  </div>
                </div>
              </td>
              <td class="text-gray-700 py-3 px-5">{{ planet?.planetColor }}</td>

              <td class="text-gray-700 py-3 px-5">{{ planet?.planetRadiusKM }} km</td>

              <td class="text-gray-700 py-3 px-5">{{ planet?.distInMillionsKM?.fromSun }}</td>

              <td class="text-gray-700 py-3 px-5">{{ planet?.distInMillionsKM?.fromEarth }}</td>
            </tr>
          } @empty {
            <tr>
              <td colspan="5" class="text-center py-6 text-lg">Sorry no planets for now...</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
} @placeholder (minimum 500ms) {
  <div class="flex w-full h-full items-center justify-center p-4 sm:p-0">
    <app-loader></app-loader>
  </div>
}
